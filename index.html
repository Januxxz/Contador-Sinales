<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contador de Sinais</title>
<style>
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        font-family: Arial, sans-serif;
    }
    .section-toggle {
        font-size: 1.2em;
        font-weight: bold;
        color: #ffffff;
        background-color: #007bff;
        padding: 10px 20px;
        margin: 10px 0;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    .section-toggle:hover {
        background-color: #0056b3;
    }
    .counter-section {
        margin-bottom: 20px;
        text-align: center;
    }
    .counter {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-top: 5px;
    }
    .counter span {
        min-width: 40px;
        text-align: center;
    }
    button {
        font-size: 1.2em;
        background-color: transparent;
        border: none;
        cursor: pointer;
    }
    #f3-section, #fresnel-section, #f1-section, #f2-section {
        display: none;
        margin-top: 10px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #f8f9fa;
    }
</style>
<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js"></script>
</head>
<body>

<h1>Contador de Sinais</h1>

<!-- Botões para expandir ou esconder as seções -->
<button class="section-toggle" onclick="toggleSection('f1-section')">F1</button>
<div id="f1-section"></div>

<button class="section-toggle" onclick="toggleSection('f2-section')">F2</button>
<div id="f2-section"></div>

<button class="section-toggle" onclick="toggleSection('f3-section')">F3</button>
<div id="f3-section"></div>

<button class="section-toggle" onclick="toggleSection('fresnel-section')">Fresnel</button>
<div id="fresnel-section"></div>

<script>
    // Configuração do Firebase
    const firebaseConfig = {
        apiKey: "SUA_API_KEY",
        authDomain: "SEU_PROJETO.firebaseapp.com",
        databaseURL: "https://SEU_PROJETO.firebaseio.com",
        projectId: "SEU_PROJETO_ID",
        storageBucket: "SEU_PROJETO.appspot.com",
        messagingSenderId: "SENDER_ID",
        appId: "APP_ID"
    };

    // Inicializa o Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Definindo as seções e as cores
    const sections = [
        { name: "F1 Seta 300", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F1" },
        { name: "F1 Seta 200", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F1" },
        { name: "F1 300", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F1" },
        { name: "F1 200", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F1" },
        { name: "F1 Pedestre", colors: ["Verde", "Vermelho"], sectionType: "F1" },
        { name: "F1 Ciclista", colors: ["Verde", "Vermelho"], sectionType: "F1" },
        { name: "F2 Seta 300", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F2" },
        { name: "F2 Seta 200", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F2" },
        { name: "F2 300", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F2" },
        { name: "F2 200", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F2" },
        { name: "F2 Pedestre", colors: ["Verde", "Vermelho"], sectionType: "F2" },
        { name: "F2 Ciclista", colors: ["Verde", "Vermelho"], sectionType: "F2" },
        { name: "F3 Seta 300", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F3" },
        { name: "F3 Seta 200", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F3" },
        { name: "F3 300", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F3" },
        { name: "F3 200", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "F3" },
        { name: "F3 Pedestre", colors: ["Verde", "Vermelho"], sectionType: "F3" },
        { name: "F3 Ciclista", colors: ["Verde", "Vermelho"], sectionType: "F3" },
        { name: "Fresnel Seta 300", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "Fresnel" },
        { name: "Fresnel Seta 200", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "Fresnel" },
        { name: "Fresnel 300", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "Fresnel" },
        { name: "Fresnel 200", colors: ["Verde", "Amarelo", "Vermelho"], sectionType: "Fresnel" },
        { name: "Fresnel Pedestre", colors: ["Verde", "Vermelho"], sectionType: "Fresnel" },
        { name: "Fresnel Ciclista", colors: ["Verde", "Vermelho"], sectionType: "Fresnel" }
    ];

    const containers = {
        F1: document.getElementById('f1-section'),
        F2: document.getElementById('f2-section'),
        F3: document.getElementById('f3-section'),
        Fresnel: document.getElementById('fresnel-section')
    };

    // Carregar os contadores do Firebase
    async function loadCounters() {
        for (const section of sections) {
            const container = containers[section.sectionType];
            const sectionDiv = document.createElement('div');
            sectionDiv.className = 'counter-section';
            sectionDiv.innerHTML = `<h2>${section.name}</h2>`;

            for (const color of section.colors) {
                const value = await db.ref(`${section.name}/${color}`).get().then(snapshot => snapshot.val() || 0);

                const counterDiv = document.createElement('div');
                counterDiv.className = 'counter';
                counterDiv.innerHTML = `
                    <button onclick="updateCounter('${section.name}', '${color}', -1)">⬅️</button>
                    <span>${color}</span>
                    <span id="${section.name}-${color}">${value}</span>
                    <button onclick="updateCounter('${section.name}', '${color}', 1)">➡️</button>
                `;
                sectionDiv.appendChild(counterDiv);
            }
            container.appendChild(sectionDiv);
        }
    }

    // Atualizar o contador no Firebase
    function updateCounter(section, color, change) {
        const counter = document.getElementById(`${section}-${color}`);
        let currentValue = parseInt(counter.textContent) + change;
        if (currentValue < 0) currentValue = 0;

        counter.textContent = currentValue;
        db.ref(`${section}/${color}`).set(currentValue);
    }

    // Mostrar ou esconder seções
    function toggleSection(sectionId) {
        const section = document.getElementById(sectionId);
        section.style.display = section.style.display === 'none' ? 'block' : 'none';
    }

    loadCounters();
</script>
</body>
</html>
